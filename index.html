<!DOCTYPE html>
<html>
        <!--<body background="assets/images/snlimage.jpg" opacity="0.2">-->
<head>
    <title>SNL Gifs</title>
    <meta charset="UTF-8">
    <!--<script type="text/javascript" src="assets/javascript/app.js"></script>-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>
<body>
        <div id ="headerindex"> 
            <h1 class="h1index">SNL's Best!</h1>
            <div id="buttons-view" class="btn btn-light namebutton">
        </div>
        </div>
        <br>
        <br>
      <div class = "container wrapperindex">
        <form id ="search">
                <label for="name-input">Search for your favorite SNL cast member: 
                <input type="text" id="name-input" placeholder="i.e., Bill Murray"> Then click on the button above to see the magic!</label>
                <br>
                <!-- Button triggers new movie to be added -->
      <input id="add-name" type="submit" value="Submit">
  
        </form>
        <!-- Area for gifs to appear-->
        <div id="gif-view">

        </div>
      </div>  
      
</body>
</html>
<script>
//Initial array of names

var names = ["Chris Farley", "Will Ferrell", "Bill Hader", "Adam Sandler", "Molly Shannon"];
console.log(names)

 

//function for displaying names
function renderButtons() {
  $("#buttons-view").empty();
  //loop through array of names
  for (var i = 0; i < names.length; i++) {
    
    //dynamically generate buttons for each name in array
    var a = $("<button>");
    // Adding a class of name-btn to our button 
    a.addClass("name-btn");
    // Adding a data-attribute
    a.attr("data-name", names[i]);
    // Providing the initial button text
    a.text(names[i]);
    // Adding the button to the buttons-view div
    $("#buttons-view").append(a);
    
}
}
// This function handles events where one button is clicked
$("#add-name").on("click", function(event) {
  event.preventDefault();
  // This line will grab the text from the input box
  var name = $("#name-input").val().trim();
  // The name from the textbox is then added to our array
  names.push(name);
  console.log(names);
  // calling renderButtons which handles the processing of our name array
  renderButtons();
});

// Adding a click event listener to all elements with a class of "movie-btn"
//$(document).on("click", ".name-btn", displayNameInfo);





// Calling the renderButtons function to display the intial buttons
renderButtons();

//create function to query Giphy API
function queryGiphy(name,fulfillGiphy){
    let queryURL = "https://api.giphy.com/v1/gifs/search?q=" +
    name + "&api_key=dc6zaTOxFJmzC&limit=10&rating=PG-13";
    let htmlRequest = new XMLHttpRequest();
    htmlRequest.onload = function() { 
        if(htmlRequest.response) {
            let object = JSON.parse(htmlRequest.response);
            fulfillGiphy(object.data);
        } else {
            console.log("error");
        }
    };
    htmlRequest.open("GET", queryURL, true);
    htmlRequest.send();
}
queryGiphy("Bill Murray", function(results){
   console.log(results); 
});

</script>
